<<<<<<< HEAD
!function(){"use strict";let e={bamboo:{B3:"b3.ogg",G4:"g4.ogg"},piano:{A4:"A4.mp3",C4:"C4.mp3"},trumpet:{C4:"C4.wav"},flute:{C5:"C5.wav"},guitar:{C4:"C4.wav"},strings:{"A#2":"Ash2.ogg",A5:"A5.ogg",C4:"C4.ogg",C7:"C7.ogg","D#2":"Dsh2.ogg",D5:"D5.ogg",E3:"E3.ogg",E6:"E6.ogg",G4:"G4.ogg"},toms:{"A#3":"Tom606_EQ_FADE.ogg"},crow_bass:{C4:"C4.wav"},kr55:{C4:"Bassdrum.wav","C#4":"Claves.wav",D4:"Conga.wav","D#4":"Cowbell.wav",E4:"Cymbal.wav",F4:"Hat Closed.wav","F#4":"Hat Open.wav",G4:"Rim Shot.wav","G#4":"Snaredrum.wav",A4:"Tom.wav"},choirA:{A2:"CH-AA-A2.mp3",A3:"CH-AA-A3.mp3",A4:"CH-AA-A4.mp3",B2:"CH-AA-B2.mp3",B3:"CH-AA-B3.mp3",B4:"CH-AA-B4.mp3",C2:"CH-AA-C2.mp3",C3:"CH-AA-C3.mp3",C4:"CH-AA-C4.mp3",C5:"CH-AA-C5.mp3",D2:"CH-AA-D2.mp3",D3:"CH-AA-D3.mp3",D4:"CH-AA-D4.mp3",E2:"CH-AA-E2.mp3",E3:"CH-AA-E3.mp3",E4:"CH-AA-E4.mp3",F2:"CH-AA-F2.mp3",F3:"CH-AA-F3.mp3",F4:"CH-AA-F4.mp3",G2:"CH-AA-G2.mp3",G3:"CH-AA-G3.mp3",G4:"CH-AA-G4.mp3"},choirE:{A2:"CH-EE-A2.mp3",A3:"CH-EE-A3.mp3",A4:"CH-EE-A4.mp3",B2:"CH-EE-B2.mp3",B3:"CH-EE-B3.mp3",B4:"CH-EE-B4.mp3",C2:"CH-EE-C2.mp3",C3:"CH-EE-C3.mp3",C4:"CH-EE-C4.mp3",C5:"CH-EE-C5.mp3",D2:"CH-EE-D2.mp3",D3:"CH-EE-D3.mp3",D4:"CH-EE-D4.mp3",E2:"CH-EE-E2.mp3",E3:"CH-EE-E3.mp3",E4:"CH-EE-E4.mp3",F2:"CH-EE-F2.mp3",F3:"CH-EE-F3.mp3",F4:"CH-EE-F4.mp3",G2:"CH-EE-G2.mp3",G3:"CH-EE-G3.mp3",G4:"CH-EE-G4.mp3"},choirI:{A2:"CH-II-A2.mp3",A3:"CH-II-A3.mp3",A4:"CH-II-A4.mp3",B2:"CH-II-B2.mp3",B3:"CH-II-B3.mp3",B4:"CH-II-B4.mp3",C2:"CH-II-C2.mp3",C3:"CH-II-C3.mp3",C4:"CH-II-C4.mp3",C5:"CH-II-C5.mp3",D2:"CH-II-D2.mp3",D3:"CH-II-D3.mp3",D4:"CH-II-D4.mp3",E2:"CH-II-E2.mp3",E3:"CH-II-E3.mp3",E4:"CH-II-E4.mp3",F2:"CH-II-F2.mp3",F3:"CH-II-F3.mp3",F4:"CH-II-F4.mp3",G2:"CH-II-G2.mp3",G3:"CH-II-G3.mp3",G4:"CH-II-G4.mp3"},choirO:{A2:"CH-OO-A2.mp3",A3:"CH-OO-A3.mp3",A4:"CH-OO-A4.mp3",B2:"CH-OO-B2.mp3",B3:"CH-OO-B3.mp3",B4:"CH-OO-B4.mp3",C2:"CH-OO-C2.mp3",C3:"CH-OO-C3.mp3",C4:"CH-OO-C4.mp3",C5:"CH-OO-C5.mp3",D2:"CH-OO-D2.mp3",D3:"CH-OO-D3.mp3",D4:"CH-OO-D4.mp3",E2:"CH-OO-E2.mp3",E3:"CH-OO-E3.mp3",E4:"CH-OO-E4.mp3",F2:"CH-OO-F2.mp3",F3:"CH-OO-F3.mp3",F4:"CH-OO-F4.mp3",G2:"CH-OO-G2.mp3",G3:"CH-OO-G3.mp3",G4:"CH-OO-G4.mp3"},choirU:{A2:"CH-UU-A2.mp3",A3:"CH-UU-A3.mp3",A4:"CH-UU-A4.mp3",B2:"CH-UU-B2.mp3",B3:"CH-UU-B3.mp3",B4:"CH-UU-B4.mp3",C2:"CH-UU-C2.mp3",C3:"CH-UU-C3.mp3",C4:"CH-UU-C4.mp3",C5:"CH-UU-C5.mp3",D2:"CH-UU-D2.mp3",D3:"CH-UU-D3.mp3",D4:"CH-UU-D4.mp3",E2:"CH-UU-E2.mp3",E3:"CH-UU-E3.mp3",E4:"CH-UU-E4.mp3",F2:"CH-UU-F2.mp3",F3:"CH-UU-F3.mp3",F4:"CH-UU-F4.mp3",G2:"CH-UU-G2.mp3",G3:"CH-UU-G3.mp3",G4:"CH-UU-G4.mp3"}};function t(e={},t){let n={};for(const t in e)n[t]=new i(e[t],t);return{update:function(e){for(const t in n)n[t].update(e)},get:function(e){let t={};for(const a in n)"type"!==a&&(t[a]=n[a].get(e));return t},set:function(e,t){n[e].set(t)}}}function n(e){const t={reverb:e=>new Tone.Reverb(e.decay),distortion:e=>new Tone.Distortion(e.distortion),bitCrush:e=>new Tone.BitCrusher(e.bits),autoFilter:e=>new Tone.AutoFilter(e.frequency).start(),autoPanner:e=>new Tone.AutoPanner(e.frequency).start(),cheby:e=>new Tone.Chebyshev(Math.round(e.order)),chorus:e=>{const t=Math.round(e.frequency),n=e.delay,a=e.depth;return new Tone.Chorus(t,n,a).start()},feedback:e=>new Tone.FeedbackDelay(e.delay,e.feedback),phaser:e=>{const t=Math.floor(e.frequency),n=Math.floor(e.octaves),a=Math.floor(e.base);return new Tone.Phaser(t,n,a)},pingPong:e=>new Tone.PingPongDelay(e.delay,e.feedback),tremolo:e=>{const t=Math.floor(e.frequency),n=e.depth;return new Tone.Tremolo(t,n).start()},vibrato:e=>{const t=Math.floor(e.frequency),n=e.depth;return new Tone.Vibrato(t,n)}};return{get:function(e,n){return t[e](n)}}}window.Doodoo=function(t,l){let u="4n",s="string"==typeof t.tonic?t.tonic:o[t.tonic],m=t.transpose??s,i=t.useOctave??!1,h=t.scale??[0,2,4,5,7,9,11],d=t.sequence??[[!0]],C=t.volume??0,g=t.autoLoad??!0,f=t.autoStart??!0,y=!1,A=t.startLoops??[];if(A.length>0&&!A[0].hasOwnProperty("counts"))return alert("Old start loops!");let H=t.useMeter??!1,E=(t.setMeter,t.useMetro??!1),w=t.withRecording??!1,x=t.withCount??!1,D=t.onLoop??!1,b=t.onNote??!1,O=t.noMods??!1,I=t.useDefaultProps??!0;const k=t.mods?structuredClone(t.mods):{};for(const e in DoodooProps.props)k.hasOwnProperty(e)||(k[e]=I?structuredClone(DoodooProps.props[e]):{});let F,U,G,M,T,B=[...new Set([...k.instruments.stack.flatMap((e=>e.list)).filter((e=>!e.includes("Synth"))),...t.partMods.flatMap((e=>e.instruments.stack)).flatMap((e=>e.list)).filter((e=>!e.includes("Synth"))),...A.flatMap((e=>e.loops)).flatMap((e=>e)).filter((e=>e.instrument)).filter((e=>!e.instrument.includes("Synth"))).map((e=>e.instrument))])],P=0,L=0,S=!1,$=[],_=[],q=0,R=0,j=new n,N=[];t.parts.forEach((e=>{e.forEach((e=>{parseInt(e[1])>parseInt(u)&&(u=e[1])}))})),k.beatList.list.forEach((e=>{e>parseInt(u)&&(u=e+"n")}));const Q={tonic:s,transpose:m,scale:h,useOctave:i};for(let e=0;e<t.parts.length;e++){let n;n=t?.partMods[e]?{...k,...t.partMods[e]}:{...k},$.push(new p(t.parts[e],n,u,Q,a))}async function V(){try{await Tone.start(),B.length>0?function(n){const a={};for(let t=0;t<B.length;t++){const n=B[t];if("choir"===n)"AEIOU".split("").forEach((t=>{const o=e["choir"+t];for(const e in o)a[`${n}-${t}-${e}`]=`${n}/${t}/${o[e]}`}));else for(const t in e[n])a[`${n}-${t}`]=`${n}/${e[n][t]}`}console.time(`load ${B.join(", ")}`),F=new Tone.ToneAudioBuffers({urls:a,baseUrl:t.samplesURL||"../samples/",onload:()=>{console.timeEnd(`load ${B.join(", ")}`),n&&n(),samplesLoaded=!0}})}(z):z()}catch(e){console.error("load tone error",e)}}function z(){l&&l(),U=new Tone.Loop(J,u),Tone.Transport.start(),t.bpm&&(Tone.Transport.bpm.value=t.bpm),U.start(Tone.Transport.seconds);var e=new Tone.Compressor({threshold:-30,ratio:3,attack:.5,release:.1});const n=new Tone.Limiter(-20);Tone.Master.chain(e,n),H&&(G=new Tone.Meter({channels:2}),Tone.Destination.connect(G),t.setMeter(G)),(f||y)&&K(),E&&(T=new Tone.MetalSynth({volume:-12,frequency:250,envelope:{attack:.01,decay:.01,release:.2},harmonicity:3.1,modulationIndex:32,resonance:4e3,octaves:1.5}).toDestination()),S=!0,w&&M.start()}function J(e){E&&T.triggerAttackRelease("C4","4n",e,.1);for(let t=0;t<_.length;t++){const n=_[t];if(n.count>n.countEnd)continue;if(n.count%1!=0)continue;const a=Math.floor(n.count)%n.melody.length,o=n.melody[a];if(null!==o[0]&&"rest"!==o[0]){let[t,a,l]=o;if("def"!==n.playBeat&&(a=n.playBeat+"n"),l||(l=1),n.double){a=2*parseInt(a)+"n";let o=Tone.Time(a).toSeconds();n.instrument.triggerAttackRelease(t,a,e,l),n.instrument.triggerAttackRelease(t,a,e+o,l)}else n.instrument.triggerAttackRelease(t,a,e,l)}b&&b({loopIndex:t,note:o}),n.count+=1}R++,R===q&&K()}function K(){R=0,function(){const e=[];for(let t=0;t<_.length;t++)e.push(_[t].instrument);for(let t=0;t<N.length;t++)e.push(N[t]);for(let t=0;t<e.length;t++){e[t];setTimeout((()=>{e[t].dispose()}),2e3)}_=[],N=[]}(),_=[];let e=[],n=0;for(let t=0;t<$.length;t++)if(d[t][P]){const a=$[t].getCount();let o=0;for(let e=0;e<A.length;e++){if(a<o+A[e].counts){o=e;break}o+=A[e].counts}const l=o<A.length?A[o].loops:{},u=$[t].get(l);u.forEach((e=>{e.melody.length>n&&(n=e.melody.length)})),e.push(u)}for(let t=0;t<e.length;t++){const a=e[t];for(let e=0;e<a.length;e++){const t=a[e],o=Math.floor(n/t.melody.length),l=structuredClone(t.melody);for(let e=1;e<o;e++){const e=structuredClone(l);t.melody=t.melody.concat(e)}t.countEnd=t.melody.length-1}}for(let t=0;t<e.length;t++){let n=e[t];for(let e=0;e<n.length;e++){const t=n[e],a={...t,melody:0===t.harmony?r(t.melody,s,m,h):c(t.melody,s,m,t.harmony,h,i),instrument:W(t.instrument,{...t,volume:C})};_.push(a)}}q=Math.max(0,Math.max(..._.map((e=>e.melody.length))));const a=Math.max(..._.flatMap((e=>e.melody.map((e=>parseInt(e[1]))))));if(U.interval=a+"n",!O){for(let e=0;e<$.length;e++)d[e][P]&&$[e].update();t.onModulate&&t.onModulate(L)}P++,P>=d[0].length&&(P=0),L++,"stopped"===Tone.Transport.state&&Tone.Transport.start(),x&&L>x*d[0].length&&(Tone.Transport.stop(),S=!1,M&&X()),D&&D(L)}function W(t,n){const a=t.includes("Synth")?function(e){return new Tone.FMSynth({volume:e.volume??-6,envelope:{attack:Math.max(.1,e.attack),attackCurve:e.curve,release:e.release}})}(n):function(t,n){const a=function(t){const n={};if("choir"===t){const a=v("AEIOU".split(""));for(const o in e[t+a])n[o]=F.get(`${t}-${a}-${o}`)}else for(const a in e[t])n[a]=F.get(`${t}-${a}`);return n}(t),o=new Tone.Sampler({urls:a,volume:n.volume??0,attack:n.attack,release:n.release,curve:n.curve});return o.instrument=t,o}(t,n);w?a.chain(Tone.Destination,M):a.toDestination();for(const e in n.fx){const t=j.get(e,n.fx[e]);w?t.chain(Tone.Destination,M):t.toDestination(),a.connect(t),N.push(t)}return a}async function X(){const e=await M.stop(),n=URL.createObjectURL(e),a=document.createElement("a"),o=prompt("Name clip",t.title||"Doodoo_"+(new Date).toDateString().replace(/ /g,"-"));a.download=o+".webm",a.href=n,a.click()}return w&&(M=new Tone.Recorder,x||(x=+prompt("Record number of modulations?",10))),g&&V(),{play:function(){if(!g)return V();!usesSamples||samplesLoaded?(K(),U.start(Tone.Transport.seconds),S=!0,w&&M.start()):y=!0},stop:function(){Tone.Transport.stop(),U.stop(),S=!1,w&&"started"===M.state&&X()},isRecording:function(){return!!M&&("started"===M.state||"paused"===M.state)},modulate:function(){L++,$.forEach((e=>{e.update()}))},getLoops:()=>_,getStatusIsPlaying:()=>S,printLoops:()=>{console.log("loops",_)},printParams:()=>{console.log($.map((e=>e.getParams())))}}};const a=!1,o=["C_1","C#_1","D_1","D#_1","E_1","F_1","F#_1","G_1","G#_1","A_1","A#_1","B_1","C0","C#0","D0","D#0","E0","F0","F#0","G0","G#0","A0","A#0","B0","C1","C#1","D1","D#1","E1","F1","F#1","G1","G#1","A1","A#1","B1","C2","C#2","D2","D#2","E2","F2","F#2","G2","G#2","A2","A#2","B2","C3","C#3","D3","D#3","E3","F3","F#3","G3","G#3","A3","A#3","B3","C4","C#4","D4","D#4","E4","F4","F#4","G4","G#4","A4","A#4","B4","C5","C#5","D5","D#5","E5","F5","F#5","G5","G#5","A5","A#5","B5","C6","C#6","D6","D#6","E6","F6","F#6","G6","G#6","A6","A#6","B6","C7","C#7","D7","D#7","E7","F7","F#7","G7","G#7","A7","A#7","B7","C8","C#8","D8","D#8","E8","F8","F#8","G8","G#8","A8","A#8","B8","C9","C#9","D9","D#9","E9","F9","F#9","G9"],l=[12,83];function u(e){for(a&&(e<l[0]||e>l[1])&&console.log("** constrain **",e,l[0],l[1]);e<l[0];)e+=12;for(;e>l[1];)e-=12;return e}function r(e,t,n,a){return e.map((e=>{if(null===e[0]||"rest"==e[0])return e;{const a=e[0],l=o.indexOf(t)-o.indexOf(n),r=o.indexOf(a)-l;return e[0]=o[u(r)],e}}))}function c(e,t,n,a,l,r=!1){return e.map((e=>{if(null===e[0]||"rest"==e[0])return e;{const c=e[0],s=o.indexOf(c),p=o.indexOf(t),m=p-o.indexOf(n),i=12*(Math.floor(s/12)-Math.floor(p)/12),v=s-p,h=v<0?l.indexOf(12-Math.abs(v)%12):l.indexOf(v%12);let d=l[(h+a-1)%l.length];r&&(d+=12*Math.floor((h+a-1)/l.length)),-1===h&&(console.log("not in scale"),d=0);let C=12*Math.floor(Math.abs(v)/12)*Math.sign(v),g=o.indexOf(t)+d+C-m+i;return e[0]=o[u(g)],e}}))}function s(e,t,n){let a=new i(t.min??{value:0}),o=new i(t.max??{value:1}),l=new i(t.step??{value:1}),u=new i(t.kick??{value:0}),r=new i(t.chance??{value:.5}),c=new i(t.type??{value:"value"}),s=new i(t.bound??{value:"stay"}),p=!(u.get()>0);function m(){e<a.get()&&(e=a.get()),e>o.get()&&(e=o.get())}return{update:function(t){if(!p){if(t<u.get())return;t>=u.get()&&(p=!0)}if(h(r.get())){switch(a.update(t),o.update(t),c.get()){case"walk":e+=h(.5)?l.get():-l.get();break;case"walkUp":e+=l.get();break;case"walkDown":e-=l.get()}e>o.get()&&"reset"===s.get()&&(e=a.get()),m()}},get:function(){return"range"===c.get()&&p?v(a.get(),o.get()):(p&&m(),e)},set:function(t){e=t,p&&m()}}}function p(e,n,a,o,l){let u={},r=0;for(const e in n)"bundle"===n[e]?.type?u[e]=new t(n[e],e):u[e]=new i(n[e],e);function s(t){return e.flatMap((e=>{let[n,o]=e,l=t/4*parseInt(o),c=parseInt(a)/l,s=[[h(u.rest.get())?"rest":n,l+"n",u.velocity.get().step]];u.velocity.update(r);for(let e=1;e<c;e++)s.push([null,a]);return s}))}return{get:function(e){const t=[],o=e?.length??u.loopNum.getInt(),l=[...Array(o)].map((()=>u.beatList.get())),r=Math.min(...l);for(let c=0;c<o;c++){const o=u.velocity.get();u.velocity.set("step",o.start);let p=s(l[c]);const m=structuredClone(p);for(let e=1;e<l[c]/r;e++){const e=structuredClone(m);p=p.concat(e)}let i=u.startIndex.getInt();if(i>0){for(;null===p[i][0];)i++,i>=p.length&&(i=0);p=p.slice(i).concat(p.slice(0,i))}const v=c>0?u.startDelay.getInt():0;for(let e=0;e<v;e++)p.unshift([null,a]);const d={};let C=0;for(;Object.keys(d).length<u.fxLimit.get()&&C<n.fxList.list.length;){const e=u.fxList.get();u[e]&&h(u[e].get().chance)&&(d[e]=u[e].get()),C++}h(u.reverb.get().chance)&&(d.reverb=u.reverb.get());const g=u.harmony.get(),f=u.playBeat.get(),y={melody:p,count:0,countEnd:p.length-1,harmony:h(g.chance)?g.interval:0,instrument:u.instruments.get(c),attack:u.attack.get(),curve:u.curve.get(),release:u.release.get(),double:h(u.double.get()),fx:d,playBeat:h(f.chance)?f.beat:"def"};if(e&&e[c])for(const t in e[c])y[t]=e[c][t];t.push(y)}return t},update:function(){r++;for(const e in u)u[e].update(r);const t=u.slice.get();if(h(t.chance)){let n=function(e,t){t||(t=e,e=0);return Math.round(Math.random()*(t-e)+e)}(e.length),a=e.slice(n,n+Math.round(t.length));if(h(t.harmChance)){const e=t.harmList;a=c(a,o.tonic,o.transpose,e,o.scale,o.useOctave)}e.push(...a)}const n=u.shift.get();h(n.chance)&&e.length>n.length&&e.shift()},getParams:function(){const e={};for(const t in u)e[t]=u[t].get();return e},getCount:()=>r}}window.DoodooMidi={MIDI_NOTES:o},window.Modulator=s;const m={instruments:{stack:[{list:["choir"]}],options:["choir","fmSynth",...Object.keys(e)]},loopNum:{value:1,step:1,mod:{type:{value:"range"},min:{value:1,mod:{min:{value:1},max:{value:3},type:{value:"walkUp"},chance:{value:.5}}},max:{value:1,mod:{min:{value:1},max:{value:5},type:{value:"walkUp"},chance:{value:.5}}}}},harmony:{type:"bundle",chance:{value:0,step:.01,mod:{min:{value:.5},max:{value:.5},kick:{value:1},chance:{value:1}}},interval:{list:[4,5,3,7,2,6],index:0,mod:{type:{value:"range"},min:{value:0},max:{value:0,mod:{min:{value:0},max:{value:5},step:{value:1},type:{value:"walkUp"}}}}}},beatList:{list:[4,2,1,8,16],index:0,mod:{type:{value:"range"},chance:{value:1},min:{value:0},max:{value:0,mod:{max:{value:6},chance:{value:.3},type:{value:"walkUp"}}}}},playBeat:{type:"bundle",chance:{type:"chance",value:.5},beat:{list:[4,16,8,4,2,1],index:0,mod:{type:{value:"range"},chance:{value:1},min:{value:0},max:{value:0,mod:{max:{value:6},chance:{value:.3},type:{value:"walkUp"}}}}}},startIndex:{value:0,mod:{max:{value:0,mod:{min:{value:0},max:{value:8},chance:{value:.2},type:{value:"walkUp"},kick:{value:2}}},type:{value:"range"},chance:{value:1}}},startDelay:{list:[0,1,2,4,8,3,5,7],index:0,mod:{type:{value:"range"},chance:{value:1},kick:{value:2},min:{value:0},max:{value:0,mod:{min:{value:0},max:{value:12},chance:{value:.2},type:{value:"walkUp"}}}}},slice:{type:"bundle",chance:{value:.1,step:.05},length:{value:1,mod:{type:{value:"range"},min:{value:1},max:{value:3,mod:{max:{value:8},type:{type:"walkUp"}}}}},harmChance:{value:.1,step:.05},harmList:{list:[3,4,5],index:0,mod:{type:{value:"range"},chance:{value:1},min:{value:0},max:{value:2}}}},shift:{type:"bundle",chance:{value:.2,step:.05},length:{value:16,mod:{min:{value:16,mod:{min:{value:8},max:{value:16},type:{value:"walkDown"}}},max:{value:32},type:{value:"range"}}}},double:{value:.1,step:.05},velocity:{type:"bundle",start:{value:.75,step:.05,mod:{min:{value:.25},max:{value:.85},type:{value:"range"}}},step:{value:.5,step:.01,mod:{min:{value:.1},max:{value:1},chance:{value:.66},type:{value:"walk"},step:{value:.01,mod:{min:{value:.01},max:{value:.1},type:{value:"range"},chance:{value:.2}}}}}},attack:{value:.1,step:.05,mod:{type:{value:"range"},min:{value:.1},max:{value:.5}}},curve:{list:["linear","exponential","sine","cosine","bounce","ripple","step"],index:0,mod:{chance:{value:.1},min:{value:0},max:{value:0,mod:{min:{value:0},max:{value:6},type:{value:"walkUp"},chance:{value:.25}}},type:{value:"range"}}},release:{value:.5,step:.05,mod:{type:{value:"range"},min:{value:.1},max:{value:.5}}},rest:{value:0,step:.05,type:"chance",mod:{min:{value:0,type:"chance",step:.05},max:{value:.25,type:"chance",step:.05},type:{value:"range"},kick:{value:2}}},fxLimit:{value:0,mod:{min:{value:1},max:{value:1},step:{value:1},kick:{value:4},chance:{value:1}}},fxList:{list:["distortion","bitCrush","cheby","chorus","autoFilter","autoPanner","feedback","phaser","pingPong","tremolo","vibrato"],index:0,mod:{type:{value:"range"},min:{value:0},max:{value:10}}},reverb:{type:"bundle",chance:{value:1},decay:{value:5,step:.1,range:[.5,32]}},distortion:{type:"bundle",chance:{value:.1,type:"chance"},distortion:{value:.1,step:.01,mod:{min:{value:.05},max:{value:.2},type:{value:"range"}}}},bitCrush:{type:"bundle",chance:{value:.1,type:"chance"},bits:{list:[3,4,6,8,12,16],mod:{min:{value:0},max:{value:5},type:{value:"range"},chance:{value:1}}}},autoFilter:{type:"bundle",chance:{value:.1,type:"chance"},frequency:{list:["2n","4n","8n","16n","32n"],mod:{min:{value:0},max:{value:4},type:{value:"range"},chance:{value:1}}}},autoPanner:{type:"bundle",chance:{value:.1,type:"chance"},frequency:{list:["2n","4n","8n","16n","32n"],mod:{min:{value:0},max:{value:4},type:{value:"range"},chance:{value:1}}}},cheby:{type:"bundle",chance:{value:.1,type:"chance"},order:{value:16,mod:{min:{value:0},max:{value:40},type:{value:"range"},chance:{value:1}}}},chorus:{type:"bundle",chance:{value:.1,type:"chance"},frequency:{value:4,mod:{min:{value:1},max:{value:12},type:{value:"range"},chance:{value:1}}},delay:{value:2.5,mod:{min:{value:.1},max:{value:12},step:{value:.1},type:{value:"range"},chance:{value:1}}},depth:{value:.5,mod:{min:{value:0},max:{value:1},type:{value:"range"},chance:{value:1}}}},feedback:{type:"bundle",chance:{value:.1,type:"chance"},feedback:{value:.25,mod:{min:{value:.1},max:{value:.5},step:{value:.01},type:{value:"range"},chance:{value:1}}},delay:{list:["8n","4n","16n","32n"],mod:{min:{value:0},max:{value:3},type:{value:"range"},chance:{value:1}}}},phaser:{type:"bundle",chance:{value:.1,type:"chance"},frequency:{value:15,mod:{min:{value:0},max:{value:32},type:{value:"range"},chance:{value:1}}},octaves:{value:5,mod:{min:{value:1},max:{value:16},type:{value:"range"},chance:{value:1}}},base:{value:1e3,mod:{min:{value:0},max:{value:1e4},type:{value:"range"},chance:{value:1}}}},pingPong:{type:"bundle",chance:{value:.1,type:"chance"},feedback:{value:.25,mod:{min:{value:.1},max:{value:1},step:{value:.01},type:{value:"range"},chance:{value:1}}},delay:{list:["1n","2n","4n","8n","16n","32n","2t","4t","8t","16t","32t"],mod:{min:{value:0},max:{value:10},type:{value:"range"},chance:{value:1}}}},tremolo:{type:"bundle",chance:{value:.1,type:"chance"},frequency:{value:9,mod:{min:{value:1},max:{value:18},type:{value:"range"},chance:{value:1}}},depth:{value:.25,mod:{min:{value:.1},max:{value:1},step:{value:.05},type:{value:"range"},chance:{value:1}}}},vibrato:{type:"bundle",chance:{value:.1,type:"chance"},frequency:{value:9,mod:{min:{value:1},max:{value:18},type:{value:"range"},chance:{value:1}}},depth:{value:.25,mod:{min:{value:.1},max:{value:1},step:{value:.05},type:{value:"range"},chance:{value:1}}}}};function i(e={},t){let n=e.hasOwnProperty("list")?"list":"value";e.hasOwnProperty("stack")&&(n="stack");let a,o=e.value??0,l=e.index??0,u=e.list??[],r=e.stack??[],c=!1;function p(e){if("stack"===n){let t;return t=e<r.length?v(r[e].list):v(r.flatMap((e=>e.list))),t}if("list"===n){let e=c?Math.round(a.get()):l;return u[Math.min(u.length-1,e)]}return c?a.get():o}return e.mod&&(c=!0,a=new s("value"===n?o:l,e.mod,t)),{update:function(e){c&&a.update(e)},get:p,set:function(e){o=e,a&&a.set(o)},getInt:function(){return Math.round(p())}}}function v(e,t){return t?Math.random()*(t-e)+e:"number"==typeof e?Math.random()*e:Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:"object"==typeof e?e[v(Object.keys(e))]:void 0}function h(e){return v(1)<e}window.DoodooProps={props:m},window.Property=i}();
=======
!function(){"use strict";let e=[{key:"attackStart",type:"range",value:[.25,.7],range:[0,1],step:.05,panel:"attack"},{key:"attackStep",type:"range",value:[-.2,.2],range:[-1,1],step:.05,panel:"attack"},{key:"restChance",type:"range",value:[0,0],range:[0,1],step:.01,panel:"attack"},{key:"loopNums",type:"range",value:[1,1,.1,.2],range:[1,32],step:1,panel:"loop"},{key:"harmonyChance",type:"chance",value:.6,panel:"harmony"},{key:"harmonyStart",type:"list",value:[4,5],panel:"harmony"},{key:"harmonyAdd",type:"list",value:[2,3,6,7],shuffle:!0,panel:"harmony"},{key:"harmonyUpdateChance",type:"chance",value:.2,panel:"harmony"},{key:"startIndexes",type:"range",value:[0,0,0,.3],range:[0,0],step:1,panel:"index"},{key:"indexStep",type:"range",value:[0,0,-.2,.2],range:[0,8,-1,1],step:1,panel:"index"},{key:"durationStart",type:"list",value:[2,4],panel:"loop"},{key:"durationAdd",type:"list",value:[1,8,16,32],shuffle:!0,panel:"loop"},{key:"durationChance",type:"chance",value:.3,panel:"loop"},{key:"startDelaysStart",type:"list",value:[0,1,2,4,.5,8],panel:"index"},{key:"startDelaysAdd",type:"list",value:[12,16,3,5,7,11],shuffle:!0,panel:"index"},{key:"startDelaysChance",type:"chance",value:.3,panel:"index"},{key:"sliceChance",type:"chance",value:.1,panel:"slice"},{key:"sliceLength",type:"number",value:3,range:[1,8],panel:"slice"},{key:"shiftChance",type:"chance",value:.2,panel:"slice"},{key:"shiftLength",type:"number",value:16,range:[0,32],panel:"slice"},{key:"doublerChance",type:"chance",value:.5,panel:"doubler"},{key:"doublerCounterChance",type:"chance",value:.4,panel:"doubler"},{key:"repeat",type:"list",value:[2,3,4],panel:"doubler"},{key:"startLoops",type:"loops",value:[[{}]],panel:"loops"},{key:"fxLimit",type:"number",value:1,range:[0,16],panel:"effects"},{key:"reverbChance",type:"chance",value:1,panel:"effects"},{key:"reverbDelay",type:"number",value:0,range:[0,16],panel:"effects"},{key:"reverbDecay",type:"number",value:5,range:[.5,32],step:.1,panel:"effects"},{key:"distortionChance",type:"chance",value:.25,panel:"distortion"},{key:"distortionDelay",type:"number",value:8,range:[0,16],panel:"distortion"},{key:"distortion",type:"range",value:[.05,.2],range:[.01,1],step:.01,panel:"distortion"},{key:"bitCrushChance",type:"chance",value:.25,panel:"distortion"},{key:"bitCrushDelay",type:"number",value:8,range:[0,16],panel:"distortion"},{key:"bitCrushBits",type:"list",value:[3,4,6,8,12,16],panel:"distortion"},{key:"autoFilterChance",type:"chance",value:.25,panel:"filter"},{key:"autoFilterDelay",type:"number",value:8,range:[0,16],panel:"filter"},{key:"autoFilterFrequency",type:"list",value:["2n","4n","8n","16n","32n"],panel:"filter"},{key:"autoPannerChance",type:"chance",value:.25,panel:"filter"},{key:"autoPannerDelay",type:"number",value:8,range:[0,16],panel:"filter"},{key:"autoPannerFrequency",type:"list",value:["2n","4n","8n","16n","32n"],panel:"filter"},{key:"chebyChance",type:"chance",value:.25,panel:"filter"},{key:"chebyDelay",type:"number",value:8,range:[0,16],panel:"filter"},{key:"chebyOrder",type:"number",value:16,range:[1,100],panel:"filter"},{key:"chorusChance",type:"chance",value:.25,panel:"chorus"},{key:"chorusDelay",type:"number",value:8,range:[0,16],panel:"chorus"},{key:"chorusFrequency",type:"number",value:4,range:[1,12],panel:"chorus"},{key:"chorusDelayTime",type:"number",value:2.5,range:[.1,12],step:.1,panel:"chorus"},{key:"chorusDepth",type:"number",value:.5,range:[0,1],panel:"chorus"},{key:"feedbackChance",type:"chance",value:.25,panel:"delay"},{key:"feedbackDelay",type:"number",value:8,range:[0,16],panel:"delay"},{key:"feedbackDelayTime",type:"list",value:["8n","4n","16n","32n"],panel:"delay"},{key:"feedback",type:"number",value:.25,range:[.1,1],step:.01,panel:"delay"},{key:"phaserChance",type:"chance",value:.25,panel:"phaser"},{key:"phaserDelay",type:"number",value:8,range:[0,16],panel:"phaser"},{key:"phaserFrequency",type:"number",value:15,range:[0,32],panel:"phaser"},{key:"phaserOctaves",type:"number",value:5,range:[1,16],panel:"phaser"},{key:"phaserBaseFrequency",type:"number",value:1e3,range:[1,1e4],panel:"phaser"},{key:"pingPongChance",type:"chance",value:.25,panel:"delay"},{key:"pingPongDelay",type:"number",value:8,range:[0,16],panel:"delay"},{key:"pingPongDelayTime",type:"list",value:["1n","2n","4n","8n","16n","32n","2t","4t","8t","16t","32t"],panel:"delay"},{key:"pingPongFeedback",type:"number",value:.25,range:[0,1],step:.01,panel:"delay"},{key:"tremoloChance",type:"chance",value:.25,panel:"tremolo"},{key:"tremoloDelay",type:"number",value:8,range:[0,16],panel:"tremolo"},{key:"tremoloFrequency",type:"range",value:[9,9],range:[1,18],step:1,panel:"tremolo"},{key:"tremoloDepth",type:"range",value:[.1,.5],range:[0,1],step:.05,panel:"tremolo"},{key:"vibratoChance",type:"chance",value:.25,panel:"vibrato"},{key:"vibratoDelay",type:"number",value:8,range:[0,16],panel:"vibrato"},{key:"vibratoFrequency",type:"range",value:[9,9],range:[1,18],step:1,panel:"vibrato"},{key:"vibratoDepth",type:"range",value:[.1,.5],range:[0,1],step:.05,panel:"vibrato"}],t={};function n(e){const t={distortion:()=>{const t=l(...e.distortion);return new Tone.Distortion(t)},bitCrush:()=>{const t=l(e.bitCrushBits);return new Tone.BitCrusher(t)},autoFilter:()=>{const t=l(e.autoFilterFrequency);return new Tone.AutoFilter(t).start()},autoPanner:()=>{const t=l(e.autoPannerFrequency);return new Tone.AutoPanner(t).start()},cheby:()=>{const t=u(e.chebyOrder);return new Tone.Chebyshev(t)},chorus:()=>{const t=u(e.chorusFrequency),n=l(e.chorusDelayTime),a=l(e.chorusDepth);return new Tone.Chorus(t,n,a).start()},feedback:()=>{const t=l(e.feedback),n=l(e.feedbackDelayTime);return new Tone.FeedbackDelay(n,t)},phaser:()=>{const t=u(e.phaserFrequency),n=u(e.phaserOctaves),a=u(e.phaserBaseFrequency);return new Tone.Phaser(t,n,a)},tremolo:()=>{const t=u(...e.tremoloFrequency),n=l(...e.tremoloDepth);return new Tone.Tremolo(t,n).start()},pingPong:()=>{const t=l(e.pingPongDelayTime),n=l(e.pingPongFeedback);return new Tone.PingPongDelay(t,n)},vibrato:()=>{const t=u(...e.vibratoFrequency),n=l(e.vibratoDepth);return new Tone.Vibrato(t,n)}};function n(t,n){return c(e[t+"Chance"])&&n>=e[t+"Delay"]}return{get:function(a){let o=[];if(n("reverb",a)){const t=new Tone.Reverb({decay:e.reverbDecay});o.push(t)}const r=s(Object.keys(t).filter((e=>n(e,a)))).slice(0,e.fxLimit).map((e=>t[e]()));return[...o,...r]}}}e.forEach((e=>{const{key:n,value:a,type:o}=e;switch(o){case"range":case"chance":case"number":case"loops":t[n]=a;break;case"list":t[n]=e.shuffle?s(a):a}})),window.DoodooControls={defaults:t,controls:e},window.Doodoo=function(e,u){let s,m=e.debug,C=!1,h=e.duration||"4n",d=e.scale||[0,2,4,5,7,9,11],g=void 0===e.autoStart||e.autoStart,f=void 0===e.autoLoad||e.autoStart,D=e.voices||[e.samples];0===D.length&&D.push("FMSynth");let A,v,H=e.withRecording;H&&(A=new Tone.Recorder,v=+prompt("Record number of mutations?",10));let b="string"==typeof e.tonic?e.tonic:a[e.tonic];e.transform||(e.transform=e.tonic);let E="string"==typeof e.transform?e.transform:a[e.transform],k={...t,...e.controls},F=new n(k),O=[];if("string"==typeof e.parts[0]){const t=e.parts.map((e=>[e,h]));O.push(new p(t,k,h,m))}else if("number"==typeof e.parts[0]){const t=e.parts.map((e=>[a[e],h]));O.push(new p(t,k,h,m))}else if(Array.isArray(e.parts[0]))if(Array.isArray(e.parts[0][0]))for(let t=0;t<e.parts.length;t++){const n=e.parts[t];O.push(new p(n,k,h,m));const a=e.parts[t].map((e=>parseInt(e[1])));h=Math.max(...a)+"n"}else{const t=e.parts;O.push(new p(t,k,h,m));const n=e.parts.map((e=>parseInt(e[1])));h=Math.max(...n)+"n"}let I=0,T=0,G=e.simultaneous||!1;const U=new y(...k.attackStart),B=new y(...k.attackStep),w=new y(...k.restChance);let M,x=[],S=0,R=0;const P=e.useMetro;let L;async function $(){try{await Tone.start(),q?function(t){let n=function(){let e={};return D.forEach((t=>{if("choir"===t)"AEIOU".split("").forEach((n=>{const a=i["choir"+n];for(const o in a)e[`${t}-${n}-${o}`]=`${t}/${n}/${a[o]}`}));else for(const n in i[t])e[`${t}-${n}`]=`${t}/${i[t][n]}`})),e}();s=new Tone.ToneAudioBuffers({urls:n,baseUrl:e.samplesURL||"../samples/",onload:()=>{console.timeEnd(`load ${D.join(", ")}`),t&&t(),_=!0}})}(j):j()}catch(e){console.error("load tone error",e)}}let q=D.some((e=>!e.includes("Synth"))),_=!1,N=!1;function j(){u&&u(),M=new Tone.Loop(V,h),Tone.Transport.start(),e.bpm&&(Tone.Transport.bpm.value=e.bpm),M.start(Tone.Transport.seconds),(g||N)&&Q(),P&&(L=new Tone.MetalSynth({volume:-12,frequency:250,envelope:{attack:.01,decay:.01,release:.2},harmonicity:3.1,modulationIndex:32,resonance:4e3,octaves:1.5}).toDestination()),C=!0,H&&A.start()}function Q(){R=0,x=[];let t=G?O:[O[I]];t.forEach((e=>{e.getLoops().forEach((e=>{const t={...e,melody:0===e.harmony?o(e.melody,b,E):r(e.melody,b,E,e.harmony,d),voice:z(l(D))};x.push(t)}))})),x.forEach((e=>{let t=[];e.melody.forEach((e=>{const[n,a]=e;let o=+h[0]/+a[0];a.includes(".")&&(o*=1.5),t.push(e);for(let e=1;e<o;e++)t.push([null,h])})),e.melody=t,e.countNum=e.doubler?e.counter*e.noteDuration/4:1,e.countEnd=(e.melody.length-1)*e.repeat+e.startDelay,e.len=e.melody.length})),S=Math.max(0,Math.max(...x.map((e=>e.melody.length))));let n=t.map((e=>e.update()))[0];e.onMutate&&e.onMutate(n),G||(I++,I>=O.length&&(I=0)),T++,"stopped"===Tone.Transport.state&&Tone.Transport.start(),n>v&&(Tone.Transport.stop(),C=!1,J())}function V(e){P&&L.triggerAttackRelease("C4","4n",e,.1);let t=U.getRandom();for(let n=0;n<x.length;n++){const a=x[n];if(!(a.count>a.countEnd)){for(let n=0;n<a.countNum;n++){if(a.count<a.startDelay)continue;if(a.count%1!=0&&!a.doubler)continue;if(c(w.getRandom()))continue;const o=a.melody[Math.floor(a.count-a.startDelay+a.startIndex)%a.len];if(null!==o[0]){const[r,p]=o;let l=n?Tone.Time(`${a.noteDuration}n`).toSeconds()*n:0;a.voice.triggerAttackRelease(r,p,e+l,t)}a.doublerCounter&&(a.count+=a.counter)}(!a.doublerCounter||a.count<a.startDelay)&&(a.count+=a.counter)}}var n,a,o;t+=B.getRandom(),n=t,a=.1,o=1,t=Math.min(Math.max(n,a),o),R++,R===S&&Q()}function z(t){return t.includes("Synth")?function(){const t=new Tone.FMSynth({volume:e.volume||0});H?t.chain(Tone.Destination,A):t.toDestination();return F.get(T).forEach((e=>{H?e.chain(Tone.Destination,A):e.toDestination(),t.connect(e)})),t}():function(t){const n=function(e){const t={};if("choir"===e){const n=T<3?"U":l("AEIOU".split(""));for(const a in i[e+n])t[a]=s.get(`${e}-${n}-${a}`)}else for(const n in i[e])t[n]=s.get(`${e}-${n}`);return t}(t),a=new Tone.Sampler({urls:n,volume:e.volume||0,release:1});H?a.chain(Tone.Destination,A):a.toDestination();return F.get(T).forEach((e=>{H?e.chain(Tone.Destination,A):e.toDestination(),a.connect(e)})),a}(t)}async function J(){const e=await A.stop(),t=URL.createObjectURL(e),n=document.createElement("a"),a=prompt("Name clip","Doodoo_"+(new Date).toDateString().replace(/ /g,"-"));n.download=a+".webm",n.href=t,n.click()}return f&&$(),{play:function(){if(!f)return $();!q||_?(Q(),M.start(Tone.Transport.seconds),C=!0,H&&A.start()):N=!0},stop:function(){Tone.Transport.stop(),M.stop(),C=!1,H&&"started"===A.state&&J()},mutate:function(){O.forEach((e=>{e.update()}))},moveTonic:function(e){let t=a.indexOf(E)+e;E=a[t]},setTonic:function(e){E=e},moveBPM:function(e){let t=Tone.Transport.bpm.value;Tone.Transport.bpm.value=t+e},setBPM:function(e){Tone.Transport.bpm.value=e},getIsPlaying:function(){return C},isRecording:function(){return"started"===A.state||"paused"===A.state},printLoops:function(){console.log("loops",x)},getLoops:function(){return x}}};const a=["C_1","C#_1","D_1","D#_1","E_1","F_1","F#_1","G_1","G#_1","A_1","A#_1","B_1","C0","C#0","D0","D#0","E0","F0","F#0","G0","G#0","A0","A#0","B0","C1","C#1","D1","D#1","E1","F1","F#1","G1","G#1","A1","A#1","B1","C2","C#2","D2","D#2","E2","F2","F#2","G2","G#2","A2","A#2","B2","C3","C#3","D3","D#3","E3","F3","F#3","G3","G#3","A3","A#3","B3","C4","C#4","D4","D#4","E4","F4","F#4","G4","G#4","A4","A#4","B4","C5","C#5","D5","D#5","E5","F5","F#5","G5","G#5","A5","A#5","B5","C6","C#6","D6","D#6","E6","F6","F#6","G6","G#6","A6","A#6","B6","C7","C#7","D7","D#7","E7","F7","F#7","G7","G#7","A7","A#7","B7","C8","C#8","D8","D#8","E8","F8","F#8","G8","G#8","A8","A#8","B8","C9","C#9","D9","D#9","E9","F9","F#9","G9"];function o(e,t,n,o){return e.map((e=>{if(null===e[0])return e;{const[o,r]=e,p=a.indexOf(t)-a.indexOf(n),l=a.indexOf(o)-p;return[a[l],r]}}))}function r(e,t,n,o,r){return e.map((e=>{if(null===e[0])return e;{const[p,l]=e,u=a.indexOf(p),s=a.indexOf(t),c=s-a.indexOf(n),i=u-s,m=i<0?r.indexOf(12-Math.abs(i)%12):r.indexOf(i%12);let y=r[(m+o-1)%r.length];-1===m&&(y=0);let C=12*Math.floor(Math.abs(i)/12)*Math.sign(i),h=a.indexOf(t)+y+C-c;return[a[h],l]}}))}function p(e,t,n,a){let o=0;const r=new y(...t.loopNums),p=new m(t.harmonyStart,t.harmonyAdd,t.harmonyUpdateChance),s=new y(...t.startIndexes),i=new y(...t.indexStep),C=new m(t.durationStart,t.durationAdd,t.durationsChance),h=new m(t.startDelaysStart,t.startDelaysAdd,t.startDelaysChance),d={noteDuration:n,count:0,counter:1,doubler:!1,doublerCounter:!1,repeat:1,startIndex:0,startDelay:0,harmony:0,melody:e},g=t.startLoops.map((e=>e.map((e=>({...d,...e})))));return{update:function(){return function(){if(r.update(),p.update(),s.update(),i.update(),C.update(),h.update(),c(t.sliceChance)){let n=u(e.length),a=e.slice(n,n+u(1,t.sliceLength));e.push(...a)}c(t.shiftChance)&&e.length>t.shiftLength&&e.shift(),o++,a&&console.log(`${o} mutations`)}(),o},getLoops:function(){if(g[o])return g[o];const n=[],a=r.getRandInt();let u=s.getRandInt(),m=0;for(let o=0;o<a;o++){let a=C.getRandom();n.push({noteDuration:a,count:0,counter:a<4?a/4:1,doubler:a>4&&a<32&&c(t.doublerChance),doublerCounter:a>4&&c(t.doublerCounterChance),repeat:a>9?l(...t.repeat):1,startIndex:u,startDelay:m,melody:e,harmony:c(t.harmonyChance)?p.getRandom():0}),u=Math.max(0,l([u,u+i.getMin(),u+i.getMax()])),m=h.getRandom()}return n},getTestLoops:function(){return[{noteDuration:4,count:0,counter:1,doubler:!1,doublerCounter:!1,repeat:1,startIndex:0,startDelay:0,melody:e,harmony:0},{noteDuration:4,count:0,counter:1,doubler:!1,doublerCounter:!1,repeat:1,startIndex:0,startDelay:0,melody:e,harmony:4}]}}}function l(e,t){return t?Math.random()*(t-e)+e:"number"==typeof e?Math.random()*e:Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:"object"==typeof e?e[l(Object.keys(e))]:void 0}function u(e,t){return t||(t=e,e=0),Math.round(Math.random()*(t-e)+e)}function s(e){let t,n,a=e.length;for(;0!==a;)n=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[n],e[n]=t;return e}function c(e){return l(1)<e}window.DoodooMidi={MIDI_NOTES:a};let i={bamboo:{B3:"b3.ogg",G4:"g4.ogg"},flute:{C5:"C5.wav"},guitar:{C4:"C4.wav"},strings:{"A#2":"Ash2.ogg",A5:"A5.ogg",C4:"C4.ogg",C7:"C7.ogg","D#2":"Dsh2.ogg",D5:"D5.ogg",E3:"E3.ogg",E6:"E6.ogg",G4:"G4.ogg"},toms:{"A#3":"Tom606_EQ.ogg"},choirA:{A2:"CH-AA-A2.mp3",A3:"CH-AA-A3.mp3",A4:"CH-AA-A4.mp3",B2:"CH-AA-B2.mp3",B3:"CH-AA-B3.mp3",B4:"CH-AA-B4.mp3",C2:"CH-AA-C2.mp3",C3:"CH-AA-C3.mp3",C4:"CH-AA-C4.mp3",C5:"CH-AA-C5.mp3",D2:"CH-AA-D2.mp3",D3:"CH-AA-D3.mp3",D4:"CH-AA-D4.mp3",E2:"CH-AA-E2.mp3",E3:"CH-AA-E3.mp3",E4:"CH-AA-E4.mp3",F2:"CH-AA-F2.mp3",F3:"CH-AA-F3.mp3",F4:"CH-AA-F4.mp3",G2:"CH-AA-G2.mp3",G3:"CH-AA-G3.mp3",G4:"CH-AA-G4.mp3"},choirE:{A2:"CH-EE-A2.mp3",A3:"CH-EE-A3.mp3",A4:"CH-EE-A4.mp3",B2:"CH-EE-B2.mp3",B3:"CH-EE-B3.mp3",B4:"CH-EE-B4.mp3",C2:"CH-EE-C2.mp3",C3:"CH-EE-C3.mp3",C4:"CH-EE-C4.mp3",C5:"CH-EE-C5.mp3",D2:"CH-EE-D2.mp3",D3:"CH-EE-D3.mp3",D4:"CH-EE-D4.mp3",E2:"CH-EE-E2.mp3",E3:"CH-EE-E3.mp3",E4:"CH-EE-E4.mp3",F2:"CH-EE-F2.mp3",F3:"CH-EE-F3.mp3",F4:"CH-EE-F4.mp3",G2:"CH-EE-G2.mp3",G3:"CH-EE-G3.mp3",G4:"CH-EE-G4.mp3"},choirI:{A2:"CH-II-A2.mp3",A3:"CH-II-A3.mp3",A4:"CH-II-A4.mp3",B2:"CH-II-B2.mp3",B3:"CH-II-B3.mp3",B4:"CH-II-B4.mp3",C2:"CH-II-C2.mp3",C3:"CH-II-C3.mp3",C4:"CH-II-C4.mp3",C5:"CH-II-C5.mp3",D2:"CH-II-D2.mp3",D3:"CH-II-D3.mp3",D4:"CH-II-D4.mp3",E2:"CH-II-E2.mp3",E3:"CH-II-E3.mp3",E4:"CH-II-E4.mp3",F2:"CH-II-F2.mp3",F3:"CH-II-F3.mp3",F4:"CH-II-F4.mp3",G2:"CH-II-G2.mp3",G3:"CH-II-G3.mp3",G4:"CH-II-G4.mp3"},choirO:{A2:"CH-OO-A2.mp3",A3:"CH-OO-A3.mp3",A4:"CH-OO-A4.mp3",B2:"CH-OO-B2.mp3",B3:"CH-OO-B3.mp3",B4:"CH-OO-B4.mp3",C2:"CH-OO-C2.mp3",C3:"CH-OO-C3.mp3",C4:"CH-OO-C4.mp3",C5:"CH-OO-C5.mp3",D2:"CH-OO-D2.mp3",D3:"CH-OO-D3.mp3",D4:"CH-OO-D4.mp3",E2:"CH-OO-E2.mp3",E3:"CH-OO-E3.mp3",E4:"CH-OO-E4.mp3",F2:"CH-OO-F2.mp3",F3:"CH-OO-F3.mp3",F4:"CH-OO-F4.mp3",G2:"CH-OO-G2.mp3",G3:"CH-OO-G3.mp3",G4:"CH-OO-G4.mp3"},choirU:{A2:"CH-UU-A2.mp3",A3:"CH-UU-A3.mp3",A4:"CH-UU-A4.mp3",B2:"CH-UU-B2.mp3",B3:"CH-UU-B3.mp3",B4:"CH-UU-B4.mp3",C2:"CH-UU-C2.mp3",C3:"CH-UU-C3.mp3",C4:"CH-UU-C4.mp3",C5:"CH-UU-C5.mp3",D2:"CH-UU-D2.mp3",D3:"CH-UU-D3.mp3",D4:"CH-UU-D4.mp3",E2:"CH-UU-E2.mp3",E3:"CH-UU-E3.mp3",E4:"CH-UU-E4.mp3",F2:"CH-UU-F2.mp3",F3:"CH-UU-F3.mp3",F4:"CH-UU-F4.mp3",G2:"CH-UU-G2.mp3",G3:"CH-UU-G3.mp3",G4:"CH-UU-G4.mp3"}};function m(e,t,n){void 0===n&&(n=.5);let a=[...e];return{update:()=>{0!==t.length&&c(n)&&a.push(t.pop())},add:e=>{a.push(e)},getRandom:()=>l(a)}}function y(e,t,n,a){return{update:function(){c(Math.abs(n))&&e<t&&(e+=Math.sign(n)),c(Math.abs(a))&&(t+=Math.sign(a))},getRange:()=>[e,t],getRandom:()=>l(e,t),getRandInt:()=>u(e,t),getMin:()=>e,getMax:()=>t}}}();
>>>>>>> 4731d88 (formatting fix)
//# sourceMappingURL=src_maps/doodoo.min.js.map
